<nav class="bg-fifa-dark text-white shadow-lg">
    <div class="container mx-auto px-4">
        <div class="flex justify-between items-center py-4">
            <a href="/" class="text-xl font-bold flex items-center gap-2">
                <span class="text-2xl">&#9917;</span>
                <span>WC 2026 Brackets</span>
            </a>

            <div class="hidden md:flex items-center space-x-6">
                <a href="#" onclick="navigateWithState('/bracket'); return false;" class="hover:text-fifa-gold transition-colors font-semibold">
                    My Bracket
                </a>
                <a href="/results" class="hover:text-fifa-gold transition-colors">Results</a>
                <button onclick="copyShareableLink()" class="btn-gold text-sm">Share Bracket</button>
            </div>

            <button id="mobile-menu-btn" class="md:hidden text-2xl">
                &#9776;
            </button>
        </div>

        <div id="mobile-menu" class="hidden md:hidden pb-4">
            <a href="#" onclick="navigateWithState('/bracket'); return false;" class="block py-2 hover:text-fifa-gold font-semibold">My Bracket</a>
            <a href="/results" class="block py-2 hover:text-fifa-gold">Results</a>
            <button onclick="copyShareableLink()" class="block py-2 text-fifa-gold text-left w-full">Share Bracket</button>
        </div>
    </div>
</nav>

<script>
// Navigate to a page while preserving bracket state in URL
function navigateWithState(path) {
    if (window.bracketState && typeof encodeState === 'function') {
        const encoded = encodeState(window.bracketState);
        if (encoded) {
            window.location.href = `${path}?s=${encoded}`;
            return;
        }
    }
    // Fallback: preserve current URL state if present
    const currentParams = new URLSearchParams(window.location.search);
    const stateParam = currentParams.get('s');
    if (stateParam) {
        window.location.href = `${path}?s=${stateParam}`;
    } else {
        window.location.href = path;
    }
}
</script>
